syntax = "proto3";

package memos.api.v1;

import "google/api/annotations.proto";
import "google/api/client.proto";
import "google/api/field_behavior.proto";
import "google/protobuf/empty.proto";
import "google/protobuf/field_mask.proto";
import "google/protobuf/timestamp.proto";

option go_package = "gen/api/v1";

service FolderService {
  rpc CreateFolder(CreateFolderRequest) returns (Folder) {
    option (google.api.http) = {post: "/api/v1/folders"};
  }
  rpc ListFolders(ListFoldersRequest) returns (ListFoldersResponse) {
    option (google.api.http) = {get: "/api/v1/folders"};
  }
  rpc GetFolder(GetFolderRequest) returns (Folder) {
    option (google.api.http) = {get: "/api/v1/{name=folders/*}"};
    option (google.api.method_signature) = "name";
  }
  rpc UpdateFolder(UpdateFolderRequest) returns (Folder) {
    option (google.api.http) = {
      patch: "/api/v1/{folder.name=folders/*}"
      body: "folder"
    };
    option (google.api.method_signature) = "folder,update_mask";
  }
  rpc DeleteFolder(DeleteFolderRequest) returns (google.protobuf.Empty) {
    option (google.api.http) = {delete: "/api/v1/{name=folders/*}"};
    option (google.api.method_signature) = "name";
  }
}

message Folder {
  string name = 1;
  string uid = 2;
  google.protobuf.Timestamp create_time = 3 [(google.api.field_behavior) = OUTPUT_ONLY];
  google.protobuf.Timestamp update_time = 4 [(google.api.field_behavior) = OUTPUT_ONLY];

  string display_name = 5;
  string description = 6;

  string area = 7;
  string parent = 8;
}

message CreateFolderRequest {
  Folder folder = 1;
}

message ListFoldersRequest {
  int32 page_size = 1;
  string page_token = 2;
  string filter = 3;
}

message ListFoldersResponse {
  repeated Folder folders = 1;
  string next_page_token = 2;
}

message GetFolderRequest {
  string name = 1;
}

message UpdateFolderRequest {
  Folder folder = 1 [(google.api.field_behavior) = REQUIRED];
  google.protobuf.FieldMask update_mask = 2;
}

message DeleteFolderRequest {
  string name = 1;
}
